# `Lovely Paws Hotel`

## Database Schema Design

`<insert db schema design here>`

## API Documentation

## STAFF / CLIENT AUTHENTICATION OR AUTHORIZATION

All endpoints that require a current staff/client to be logged in.

* Request: endpoints that require authentication
* Error Response: Require authentication
  * Status Code: 401
  * Headers:
    * content-Type: application/json
  * Body:

  ```json
  {
    "message": "Authentication required"
  }
  ```

### All endpoints that require proper authorization

All endpoints that require authentication and the current staff / client does not have the
correct role(s) or permission(s).

* Request: endpoints that require proper authorization
* Error Response: Require proper authorization
  * Status Code: 403
  * Headers:
    * Content-Type: application/json
  * Body:

  ```json
  {
    "message": "Forbidden"
  }
  ```

### Get the Current User

Returns the information about the current Staff that is logged in.

* Require Authentication: false
* Request:
  * Method: GET
  * Route path: /api/session
  * Body: none

* Successful REsponse when there is a logged in Staff
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

  ```json
  {
    "user": {
      "id": 1,
      "fname": "John",
      "lname": "Smith",
      "username": "johnsmith",
      "password": "password1",
      "address": "123 main st",
      "city": "redlands",
      "state": "CA",
      "zip": 92323,
      "staff": true,          // for client will be false
      "position": "manager"   // for client will be null or empty
    }
  }

### Log In a User

Logs in a current user with valid credentials and returns the current user's
information.

* Require Authentication: false
* Request
  * Method: POST
  * Route path: /api/session
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "credential": "john.smith@gmail.com",
      "password": "secret password"
    }
    ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "user": {
        "id": 1,
        "fname": "John",
        "lname": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith",
        "staff": true           // for client will be false
      }
    }
    ```

* Error Response: Invalid credentials
  * Status Code: 401
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Invalid credentials"
    }
    ```

* Error response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "credential": "Email or username is required",
        "password": "Password is required"
      }
    }
    ```

### Sign Up a User

Creates a new Staff, logs them in as the current Staff, and returns the current
Staff's information.

* Require Authentication: false
* Request
  * Method: POST
  * Route path: /api/user
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "fname": "John",
      "lname": "Smith",
      "email": "john.smith@gmail.com",
      "username": "JohnSmith",
      "password": "secret password",
      "address": "123 main st",
      "city": "redlands",
      "state": "CA",
      "zip": 92323,
      "staff": true,          // for client will be false
      "position": "manager"   // for client will be null or empty
    }
    ```

* Successful Response
  * Status Code: 201
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "user": {
        "id": 1,
        "fname": "John",
        "lname": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith",
        "address": "123 main st",
        "city": "redlands",
        "state": "CA",
        "zip": 92323,
        "staff": true,          // for client will be false
        "position": "manager"   // for client will be null or empty
      }
    }
    ```

* Error response: Staff already exists with the specified email or username
  * Status Code: 500
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "email": "User with that email already exists",
        "username": "User with that username already exists"
      }
    }
    ```

* Error response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "email": "Invalid email",
        "username": "Username is required",
        "fname": "First Name is required",
        "lname": "Last Name is required",
        "address": "Address is required",
        "city": "City is required",
        "state": "State is required",
        "zip": "Zip code is required"
      }
    }
    ```

## TODAY'S SERVICE

### Get all Pets for today service - by Staff

* Require authentication: True for Staff
* Request:
  * Method: GET
  * Route path: /api/pets/<today's date>
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

  ```json
  {
    "Today Service": [
      { "date": "2024-12-10"}
      {
        "Pet Information": {
          "id": 1,
          "ownerId": 2,
          "type": "dog",    // <!-- cat or dog -->
          "name": "King",
          "breed": "husky",
          "gender": "male",
          "dob": "2021-12-10",
          "size": "medium",
          "weight": 45,     // in lbs
          "behavior": "friendly",
          "medicationNotes": "please give the medication once a day",
          "dietaryNotes": "none",
          "previewImage": "https://sample.image.png",
          "petImages": [
            {
              "id": 1,
              "petId": 1,
              "url": "https://sample.image1.png"
            }
                        {
              "id": 2,
              "petId": 1,
              "url": "https://sample.image2.png"
            }
          ]
        }
      }
      {
        "Pet Services": {
          "id": 1,
          "staffId": 5,
          "petId": 1,
          "typeOfService": "Day-Care",    // Day-Care or Boarding-Care
          "dailyFood": true,
          "exitBath": true,               // only on the last day of boarding or on the day-care
          "medication": true,
          "totalCost": 75.00,             // calculated on the last day of boarding or on the day-care
          "serviceImages": [
            {
              "id": 1,
              "serviceId": 1,
              "url": "https://sample/image10.png"
            }
                        {
              "id": 2,
              "serviceId": 1,
              "url": "https://sample/image10.png"
            }
          ]
          "Staff": {
            "id": 5,
            "fname": "John",
            "lname": "Smith"
          },
          "Drop and Pickup": {
            "dropDate": "2024-12-10",
            "dropTime": 08.00,
            "pickDate": "2021-12-10",
            "pickTime": 18.00
          }
        }
      }
    ]
  }